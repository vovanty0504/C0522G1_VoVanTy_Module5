<div class="p-3">
  <h2 class="text-center fw-bold">DANH SÁCH HỢP ĐỒNG</h2>

  <nav class="navbar navbar-expand-lg pb-0 mb-0">
    <div class="container-fluid">
      <button class="btn btn-primary btn-outline-secondary btn-sm" data-bs-toggle="modal"
              data-bs-target="#addContract">
        <span class="fa-solid fa-person-circle-plus text-light h5 my-auto me-1"></span>
        <span class="text-light"> Thêm mới hợp đồng</span>
      </button>

      <!--                  <form class="d-flex my-2" role="search" th:action="@{/contract/list}">-->
      <!--                      <input class="form-control me-2" type="text" placeholder="Input search Name" aria-label="Search"-->
      <!--                             name="nameSearch">-->

      <!--                      <input class="form-control me-2" type="text" placeholder="Input search address" aria-label="Search"-->
      <!--                             name="addressSearch">-->


      <!--                      <input class="form-control me-2" type="text" placeholder="Input search phone" aria-label="Search"-->
      <!--                             name="phoneSearch">-->

      <!--                      <button class="btn btn-outline-success" type="submit" name="action" value="search">-->
      <!--                          <i class="fa-solid fa-magnifying-glass"></i></button>-->
      <!--                  </form>-->
    </div>
  </nav>

  <div class="modal fade" id="addContract" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form class="border border-2 border-success p-3 rounded formCSS"
              method="POST">
          <div class="modal-header">
            <h3 class="modal-title fw-bold" id="exampleModalLabel3">THÊM MỚI HỢP ĐỒNG</h3>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <div class="mt-3 form-group">
            <label class="h6" for="facility">Tên Dịch Vụ:</label>
            <div class="input-group">
              <select id="facility" class="form-select">
                <option>Villa</option>
                <option>House</option>
                <option>Room</option>
              </select>
              <span class="input-group-text"><i class="fa-solid fa-file-signature"></i></span>
            </div>
          </div>


          <div class="mt-3 form-group">
            <label class="h6" for="employee">Tên Nhân Viên:</label>
            <div class="input-group">
              <select id="employee" class="form-select">
                <option>Võ Văn Tý</option>
                <option>Trung Thuyên</option>
              </select>
              <span class="input-group-text"><i class="fa-solid fa-person-circle-question"></i></span>
            </div>
          </div>

          <div class="form-group">
            <label class="h6" for="customer">Tên Khách Hàng:</label>
            <div class="input-group">
              <select id="customer" class="form-select">
                <option>Đại Lợi</option>
                <option>Thủy Điên</option>
              </select>
              <span class="input-group-text"><i class="fa-solid fa-person-circle-question"></i></span>
            </div>
          </div>

          <div class="mt-3 form-group">
            <label for="startDate" class="h6">Ngày Bắt Đầu:</label>
            <input type="date" id="startDate" class="form-control"
                   onchange="changeEndDate(this)"
                   title="Vui lòng chọn ngày bắt đầu."/>
          </div>

          <div class="mt-3 form-group" id="endDateForm" style="display: none">
            <label for="endDate" class="h6">Ngày Kết Thúc:</label>
            <input type="date" id="endDate" class="form-control"
                   title="Vui lòng chọn ngày kết thúc."/>
          </div>

          <div class="mt-3 form-group">
            <label for="deposit" class="h6">Tiền Đặt Cọc (VNĐ):</label>
            <div class="input-group">
              <input type="number" id="deposit" class="form-control"
                     placeholder="Nhập tiền đặt cọc..."/>
              <span class="input-group-text"><i class="fa-solid fa-money-bill-wave"></i></span>
            </div>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
            <button type="submit" class="btn btn-success" value="delete">Lưu</button>
          </div>
        </form>
      </div>
    </div>
  </div>


  <table class="table table-striped table-bordered" id="customerTable">
    <thead class="table-dark">
    <tr>
      <th>STT</th>
      <th>Dịch Vụ</th>
      <th>Tên Nhân Viên</th>
      <th>Tên Khách Hàng</th>
      <th>Ngày Bắt Đầu</th>
      <th>Ngày Kết Thúc</th>
      <th>Tiền Cọc</th>
      <th class="text-center">Các Dịch Vụ Đi Kèm</th>

    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let contract of contractList; index as i">
      <td>{{i + 1}}</td>
      <td>{{contract.facility}}</td>
      <td>{{contract.customer}}</td>
      <td>{{contract.customer}}</td>
      <td>{{contract.startDate}}</td>
      <td>{{contract.endDate}}</td>
      <td>{{contract.deposit}}</td>
      <td class="text-center">
        <button
          class="btn btn-primary btn-outline-secondary btn-sm" data-bs-toggle="modal"
          data-bs-target="#addContractDetail">
          <span class="fa-solid fa-plus text-light h6 m-auto"></span>
        </button>

        <button class="btn btn-primary btn-outline-secondary btn-sm ms-3 px-3"
                data-bs-toggle="modal"
                data-bs-target="#showAttachDetail">
          <span class="text-light m-auto">Danh sách dịch vụ đi kèm</span>
        </button>
      </td>
    </tbody>
  </table>


  <div class="modal fade" id="addContractDetail" tabindex="-1" aria-labelledby="exampleModalLabel1"
       aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form class="border border-2 border-success p-3 rounded formCSS"
              method="POST">
          <div class="modal-header">
            <h3 class="modal-title fw-bold text-primary" id="exampleModalLabel4">THÊM DỊCH VỤ ĐI KÈM</h3>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <div class="modal-body">
            <div class="form-group">
              <input type="hidden" name="contractId" id="contractId"
                     readonly/>

              <div class="form-group">
                <label class="h6" for="attachFacility">Tên Dịch Vụ Đi Kèm:</label>
                <div class="input-group">
                  <select id="attachFacility" class="form-select"
                  >
                    <option>Karaoke</option>
                    <option>Hồ Bơi</option>
                  </select>
                  <span class="input-group-text"><i class="fa-solid fa-file-signature"></i></span>
                </div>
              </div>

              <div class="mt-3 form-group">
                <label for="quantity" class="h6">Số Lượng:</label>
                <div class="input-group">
                  <input type="number" id="quantity" class="form-control"
                         placeholder="Nhập số lượng..." required
                         pattern="^[1-9]\d*$"
                         title="Số lượng phải là số nguyên dương."/>
                  <span class="input-group-text"></span>
                </div>
              </div>
            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
              <button type="submit" class="btn btn-success" value="delete">Lưu</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="showAttachDetail" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content modalCSS">
      <div class="modal-header">
        <h4 class="modal-title text-center" id="exampleModalLabel2">DANH SÁCH DỊCH VỤ ĐI KÈM</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <table id="showSlow"></table>

        <div class="h5 text-danger text-center" id="note">
          Chưa có dịch vụ đi kèm trong hợp đồng!
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
      </div>
    </div>
  </div>
</div>

<nav aria-label="Page navigation example" style="margin-top: 20px">
  <ul class="pagination justify-content-center">
    <li class="page-item"><a class="page-link" href="#">Previous</a></li>
    <li class="page-item"><a class="page-link" href="#">1</a></li>
    <li class="page-item"><a class="page-link" href="#">2</a></li>
    <li class="page-item"><a class="page-link" href="#">3</a></li>
    <li class="page-item"><a class="page-link" href="#">Next</a></li>
  </ul>
</nav>
